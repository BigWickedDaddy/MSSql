
USE bdhw



CREATE TABLE Directory_of_professions
(
ID_CODEPROF INT IDENTITY(1,1) NOT NULL,

NAME_OF_PROFESSION INT(VARCHAR(30)НАДО) NOT NULL,

PRIMARY KEY (ID_CODEPROF)
);



CREATE TABLE Directory_of_parts
(
KOD_PARTS INT IDENTITY(100,1) NOT NULL,

TYPEDET VARCHAR(5),

NAME VARCHAR(30) NOT NULL,

ED_IZM VARCHAR(5),

PLAN_PRICE INT,

CHECK(PLAN_PRICE>0),

CONSTRAINT PK_PARTS PRIMARY KEY(KOD_PARTS)
);


CREATE TABLE PARTS_PROFESSION
(
ID_CODEPROF INT NOT NULL,

KOD_PARTS INT NOT NULL,

NB_OPER INT NOT NULL IDENTITY(1,1),

RAZRYAD VARCHAR(30),

TARIF_COD INT NOT NULL,

TIMEFIRST VARCHAR(5) DEFAULT('min'),

TIMESECOND VARCHAR(5) DEFAULT('min'),

CONSTRAINT PK_PARTS_CODE PRIMARY KEY(ID_CODEPROF,KOD_PARTS),

CONSTRAINT FK_ID_CODEPROF FOREIGN KEY(ID_CODEPROF) REFERENCES Directory_of_professions(ID_CODEPROF),

CONSTRAINT FK_KOD_PARTS FOREIGN KEY(KOD_PARTS) REFERENCES Directory_of_parts(KOD_PARTS)

ON DELETE CASCADE ON UPDATE CASCADE,

CHECK(TARIF_COD>0)
);

CREATE TRIGGER ID_WH ON DIRECTORY_OF_PROFESSIONS



